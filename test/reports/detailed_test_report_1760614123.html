<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>接口自动化测试报告</title>
        <meta name="generator" content="InterfaceAutoTestTool"/>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>

    <style type="text/css" media="screen">
    body        { font-family: verdana, arial, helvetica, sans-serif; font-size: 80%; }
    table       { font-size: 100%; }
    pre         { white-space: pre-wrap;word-wrap: break-word; }
    /* -- heading ---------------------------------------------------------------------- */
    h1 {
        font-size: 16pt;
        color: gray;
    }
    .heading {
        margin-top: 0ex;
        margin-bottom: 1ex;
    }
    .heading .attribute {
        margin-top: 1ex;
        margin-bottom: 0;
    }
    .heading .description {
        margin-top: 2ex;
        margin-bottom: 3ex;
    }
    .button{  
        border:1px solid #cccccc;  
        cursor:pointer;  
        margin:10px 5px;  
        height:40px;  
        text-align:center;  
        border-radius: 4px;  
        border-color: #636263 #464647 #A1A3A5;  
        text-shadow: 0 1px 1px #F6F6F6;  
        background-image: -moz-linear-gradient(center top, #D9D9D9, #A6A6A6 49%, #A6A6A6 50%);  
        background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #D9D9D9),color-stop(1, #A6A6A6));  
    }  
    .buttonText{  
        position:relative;  
        font-weight:bold;  
        top:10px;
        color: #58595B;  
    }   
    /* -- report ------------------------------------------------------------------------ */
    #show_detail_line {
        margin-top: 3ex;
        margin-bottom: 1ex;
    }
    #result_table {
        width: 99%;
        border-collapse: collapse;
    }
    #header_row {
        font-weight: bold;
        color: white;
        background-color: #777;
    }
    #total_row  { font-weight: bold; }
    .passClass  { background-color: #74A474; }
    .failClass  { background-color: #FDD283; }
    .errorClass { background-color: #FF6600; }
    .passCase   { color: #6c6; }
    .failCase   { color: #FF6600; font-weight: bold; }
    .errorCase  { color: #c00; font-weight: bold; }
    .hiddenRow  { display: none; }
    .testcase   { margin-left: 2em; }

    /* -- css div popup ------------------------------------------------------------------------ */
    a.popup_link {
    }
    a.popup_link:hover {
        color: red;
    }
    .popup_window {
        display: none;
        position: relative;
        left: 0px;
        top: 0px;
        padding: 10px;
        background-color: #E6E6D6;
        font-family: "Lucida Console", "Courier New", Courier, monospace;
        text-align: left;
        font-size: 8pt;
        width: 500px;
    }
    .interface-method {
        display: inline-block;
        padding: 2px 8px;
        border-radius: 3px;
        color: white;
        font-weight: bold;
        font-size: 12px;
    }
    .method-get { background-color: #28a745; }
    .method-post { background-color: #007bff; }
    .method-put { background-color: #ffc107; color: black; }
    .method-delete { background-color: #dc3545; }
    .method-patch { background-color: #6f42c1; }

    .stats-card {
        background: white;
        padding: 15px;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        margin: 10px 0;
    }
    .stats-number {
        font-size: 24px;
        font-weight: bold;
        margin: 5px 0;
    }
    .stats-label {
        font-size: 14px;
        color: #666;
    }

    /* 图表样式 */
    .chart-container {
        background: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        margin: 20px 0;
    }
    .chart-title {
        font-size: 18px;
        font-weight: bold;
        margin-bottom: 15px;
        color: #333;
        border-bottom: 2px solid #007bff;
        padding-bottom: 5px;
    }
    .chart-row {
        display: flex;
        justify-content: space-between;
        margin-bottom: 20px;
    }
    .chart-item {
        flex: 1;
        margin: 0 10px;
        text-align: center;
    }
    .chart-canvas {
        max-width: 100%;
        height: 200px;
    }
    .legend {
        display: flex;
        justify-content: center;
        margin-top: 10px;
    }
    .legend-item {
        display: flex;
        align-items: center;
        margin: 0 10px;
    }
    .legend-color {
        width: 15px;
        height: 15px;
        border-radius: 3px;
        margin-right: 5px;
    }

    /* 成功率显示样式 */
    .success-rate-badge {
        display: inline-block;
        padding: 8px 16px;
        border-radius: 20px;
        font-weight: bold;
        font-size: 18px;
        margin: 10px 0;
    }
    .data-consistency {
        background: #f8f9fa;
        padding: 10px;
        border-radius: 5px;
        margin: 10px 0;
        border-left: 4px solid #17a2b8;
    }

    /* 单测试信息样式 */
    .single-test-info {
        background: #e7f3ff;
        border-left: 4px solid #007bff;
        padding: 15px;
        margin: 15px 0;
        border-radius: 5px;
    }
    .test-count-badge {
        display: inline-block;
        padding: 4px 8px;
        background: #17a2b8;
        color: white;
        border-radius: 12px;
        font-size: 12px;
        margin-left: 10px;
    }

    /* 按钮状态样式 */
    .btn-active {
        opacity: 1;
        font-weight: bold;
    }
    .btn-inactive {
        opacity: 0.7;
        font-weight: normal;
    }
    </style>

    <link href="https://cdn.bootcss.com/bootstrap/3.3.0/css/bootstrap.min.css" rel="stylesheet">
    </head>
    <body>
    <div class="container">
        <div class='heading'>
            <h1>🚀 接口自动化测试报告</h1>
            <p class='attribute'><strong>开始时间:</strong> 2025-10-16 19:28:43</p>
            <p class='attribute'><strong>运行时长:</strong> 1.49 秒</p>
            <p class='attribute'><strong>测试框架:</strong> unittest</p>
            <p class='attribute'><strong>测试统计:</strong> 
                <span style="color: #28a745;">通过 1</span> | 
                <span style="color: #ffc107;">失败 1</span> | 
                <span style="color: #dc3545;">错误 0</span> |
                <span style="color: #007bff;">总计 2</span>
                <span class="test-count-badge">实际接口: 2</span>
            </p>
            <p class='attribute'><strong>测试结果:</strong> 
                <span class="success-rate-badge" style="background-color: #dc3545; color: white;">
                    50.0% 成功率
                </span>
            </p>
        </div>

        

        

        <!-- 数据一致性检查 -->
        <div class="data-consistency">
            <strong>📊 数据统计:</strong> 
            总用例数: <strong>2</strong> | 
            通过率: <strong>50.0%</strong> | 
            测试状态: <strong>⚠️ 存在失败</strong>
        </div>

        <!-- 统计信息卡片 -->
        <div class="row">
            <div class="col-md-3">
                <div class="stats-card" style="border-left: 4px solid #007bff;">
                    <div class="stats-number">2</div>
                    <div class="stats-label">测试用例</div>
                    <small style="color: #666;">2 个接口</small>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stats-card" style="border-left: 4px solid #28a745;">
                    <div class="stats-number" style="color: #28a745;">1</div>
                    <div class="stats-label">通过</div>
                    <small style="color: #666;">50.0%</small>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stats-card" style="border-left: 4px solid #ffc107;">
                    <div class="stats-number" style="color: #ffc107;">1</div>
                    <div class="stats-label">失败</div>
                    <small style="color: #666;">50.0%</small>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stats-card" style="border-left: 4px solid #dc3545;">
                    <div class="stats-number" style="color: #dc3545;">0</div>
                    <div class="stats-label">错误</div>
                    <small style="color: #666;">0.0%</small>
                </div>
            </div>
        </div>

        <!-- 图表展示 -->
        
    <!-- 图表展示 -->
    <div class="chart-container">
        <div class="chart-title">📊 测试结果图表分析</div>

        <div class="chart-row">
            <div class="chart-item">
                <div style="font-weight: bold; margin-bottom: 10px;">饼状图分布</div>
                <canvas id="pieChart" width="250" height="200" class="chart-canvas"></canvas>
                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #28a745;"></div>
                        <span>通过: 1</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #ffc107;"></div>
                        <span>失败: 1</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #dc3545;"></div>
                        <span>错误: 0</span>
                    </div>
                </div>
            </div>

            <div class="chart-item">
                <div style="font-weight: bold; margin-bottom: 10px;">柱状图对比</div>
                <canvas id="barChart" width="250" height="200" class="chart-canvas"></canvas>
            </div>

            <div class="chart-item">
                <div style="font-weight: bold; margin-bottom: 10px;">成功率仪表盘</div>
                <canvas id="statusChart" width="250" height="200" class="chart-canvas"></canvas>
                <div style="margin-top: 10px; font-size: 14px; color: #666;">
                    总用例数: 2<br>
                    通过率: 50.0%
                </div>
            </div>
        </div>
    </div>
    

        <!-- 测试详情控制 -->
        <div class="btn-group btn-group-sm" style="margin: 20px 0;">
            <button class="btn btn-default btn-active" onclick='javascript:showCase(0)'><strong>📈 总结</strong></button>
            <button class="btn btn-success btn-inactive" onclick='javascript:showCase(1)'><strong>✅ 通过 (1)</strong></button>
            <button class="btn btn-warning btn-inactive" onclick='javascript:showCase(2)'><strong>❌ 失败 (1)</strong></button>
            <button class="btn btn-danger btn-inactive" onclick='javascript:showCase(3)'><strong>⚠️ 错误 (0)</strong></button>
            <button class="btn btn-info btn-inactive" onclick='javascript:showCase(4)'><strong>📋 全部 (2)</strong></button>
        </div>

        <table id='result_table' class="table table-bordered table-hover">
            <thead>
                <tr id='header_row'>
                    <td>测试接口</td>
                    <td>方法</td>
                    <td>路径</td>
                    <td>状态</td>
                    <td>响应时间</td>
                    <td>状态码</td>
                    <td>详情</td>
                </tr>
            </thead>
            <tbody>
                
            <tr id='Pt1' class='passCase'>
                <td>用户登录</td>
                <td><span class="interface-method method-post">POST</span></td>
                <td>/api/login</td>
                <td class='passCase'>✅ 通过</td>
                <td>0.50s</td>
                <td>200</td>
                <td>
                    <a class="popup_link" onfocus='this.blur();' href="javascript:showTestDetail('div_Pt1')">
                        详情
                    </a>
                    <div id='div_Pt1' class="popup_window">
                        <div style='text-align: right; color:red;cursor:pointer'>
                            <a onfocus='this.blur();' onclick="document.getElementById('div_Pt1').style.display = 'none'">[x]</a>
                        </div>
                        <pre>
接口名称: 用户登录
请求方法: POST
请求路径: /api/login
测试状态: passed
响应时间: 0.50秒
状态码: 200

=== 请求信息 ===
请求头:
  Content-Type: application/json
请求参数:
  {
  "username": "test",
  "password": "123456"
}

=== 响应信息 ===
响应体:
{
  "message": "模拟响应数据"
}

=== 断言结果 ===
✅ 状态码断言
                        </pre>
                    </div>
                </td>
            </tr>
            

            <tr id='Ft2' class='failCase'>
                <td>获取用户信息</td>
                <td><span class="interface-method method-get">GET</span></td>
                <td>/api/user/1</td>
                <td class='failCase'>❌ 失败</td>
                <td>0.60s</td>
                <td>500</td>
                <td>
                    <a class="popup_link" onfocus='this.blur();' href="javascript:showTestDetail('div_Ft2')">
                        详情
                    </a>
                    <div id='div_Ft2' class="popup_window">
                        <div style='text-align: right; color:red;cursor:pointer'>
                            <a onfocus='this.blur();' onclick="document.getElementById('div_Ft2').style.display = 'none'">[x]</a>
                        </div>
                        <pre>
接口名称: 获取用户信息
请求方法: GET
请求路径: /api/user/1
测试状态: failed
响应时间: 0.60秒
状态码: 500

=== 请求信息 ===
请求头:
  Authorization: Bearer token
请求参数:
  {
  "id": 1
}

=== 响应信息 ===
响应体:
{
  "message": "模拟响应数据"
}

=== 错误信息 ===
测试失败 - 状态码不匹配或断言失败

=== 断言结果 ===
❌ 状态码断言
   错误: 期望200，实际500
                        </pre>
                    </div>
                </td>
            </tr>
            

                <!-- 总计行 -->
                <tr id='total_row' style="background-color: #f8f9fa;">
                    <td colspan="3"><strong>测试统计</strong></td>
                    <td>
                        <span style="color: #28a745;">1✅</span>
                        <span style="color: #ffc107;">1❌</span>
                        <span style="color: #dc3545;">0⚠️</span>
                    </td>
                    <td><strong>1.49s</strong></td>
                    <td><strong style="color: #dc3545;">50.0%</strong></td>
                    <td><strong>1/2</strong></td>
                </tr>
            </tbody>
        </table>

        
        <div class="panel panel-danger">
            <div class="panel-heading">
                <h3 class="panel-title">❌ 失败和错误详情</h3>
            </div>
            <div class="panel-body">
        
            <div class="alert alert-warning">
                <h5>1. 获取用户信息</h5>
                <p><strong>方法:</strong> GET | <strong>路径:</strong> /api/user/1</p>
                <p><strong>状态码:</strong> 500 | <strong>响应时间:</strong> 0.60s</p>
                <p><strong>错误信息:</strong> 测试失败 - 状态码不匹配或断言失败</p>
                <button class="btn btn-sm btn-default" onclick="document.getElementById('error_detail_0').style.display = 'block'">
                    查看完整错误详情
                </button>
                <div id="error_detail_0" style="display: none; margin-top: 10px;">
                    <pre>测试失败 - 状态码不匹配或断言失败</pre>
                </div>
            </div>
            
            </div>
        </div>
        

    </div>

    <script language="javascript" type="text/javascript">
    // 筛选显示测试用例
    function showCase(level) {
        trs = document.getElementsByTagName("tr");
        for (var i = 0; i < trs.length; i++) {
            tr = trs[i];
            id = tr.id;
            if (id.substr(0,2) == 'Ft') {
                if (level == 2 || level == 4) {
                    tr.className = '';
                } else {
                    tr.className = 'hiddenRow';
                }
            }
            if (id.substr(0,2) == 'Pt') {
                if (level == 1 || level == 4) {
                    tr.className = '';
                } else {
                    tr.className = 'hiddenRow';
                }
            }
            if (id.substr(0,2) == 'Et') {
                if (level == 3 || level == 4) {
                    tr.className = '';
                } else {
                    tr.className = 'hiddenRow';
                }
            }
        }

        // 更新按钮状态
        updateButtonState(level);
    }

    // 更新按钮状态
    function updateButtonState(activeLevel) {
        var buttons = document.querySelectorAll('.btn-group .btn');
        buttons.forEach(function(btn, index) {
            if (index === activeLevel) {
                btn.classList.add('btn-active');
                btn.classList.remove('btn-inactive');
            } else {
                btn.classList.add('btn-inactive');
                btn.classList.remove('btn-active');
            }
        });
    }

    // 显示测试详情
    function showTestDetail(div_id){
        var details_div = document.getElementById(div_id)
        var displayState = details_div.style.display
        if (displayState != 'block' ) {
            displayState = 'block'
            details_div.style.display = 'block'
        } else {
            details_div.style.display = 'none'
        }
    }

    // 图表绘制函数
    function drawPieChart() {
        var canvas = document.getElementById('pieChart');
        if (!canvas) return;

        var ctx = canvas.getContext('2d');
        var centerX = canvas.width / 2;
        var centerY = canvas.height / 2;
        var radius = Math.min(centerX, centerY) - 10;

        var data = [1, 1, 0];
        var colors = ['#28a745', '#ffc107', '#dc3545'];
        var total = data.reduce((a, b) => a + b, 0);

        // 清空画布
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        if (total > 0) {
            var startAngle = 0;
            for (var i = 0; i < data.length; i++) {
                if (data[i] > 0) {
                    var sliceAngle = 2 * Math.PI * data[i] / total;

                    ctx.beginPath();
                    ctx.arc(centerX, centerY, radius, startAngle, startAngle + sliceAngle);
                    ctx.lineTo(centerX, centerY);
                    ctx.fillStyle = colors[i];
                    ctx.fill();

                    startAngle += sliceAngle;
                }
            }
        } else {
            // 没有数据时显示灰色圆
            ctx.beginPath();
            ctx.arc(centerX, centerY, radius, 0, 2 * Math.PI);
            ctx.fillStyle = '#e9ecef';
            ctx.fill();
            ctx.fillStyle = '#666';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText('无数据', centerX, centerY);
        }
    }

    function drawBarChart() {
        var canvas = document.getElementById('barChart');
        if (!canvas) return;

        var ctx = canvas.getContext('2d');
        var width = canvas.width;
        var height = canvas.height;

        var data = [1, 1, 0];
        var colors = ['#28a745', '#ffc107', '#dc3545'];
        var labels = ['通过', '失败', '错误'];
        var maxData = Math.max(...data);

        // 清空画布
        ctx.clearRect(0, 0, width, height);

        if (maxData > 0) {
            var barWidth = 60;
            var barSpacing = 30;
            var startX = 50;
            var chartHeight = height - 60;

            // 绘制坐标轴
            ctx.beginPath();
            ctx.moveTo(30, 20);
            ctx.lineTo(30, chartHeight);
            ctx.lineTo(width - 20, chartHeight);
            ctx.strokeStyle = '#333';
            ctx.stroke();

            // 绘制柱状图
            for (var i = 0; i < data.length; i++) {
                var barHeight = (data[i] / maxData) * (chartHeight - 40);
                var x = startX + i * (barWidth + barSpacing);
                var y = chartHeight - barHeight;

                ctx.fillStyle = colors[i];
                ctx.fillRect(x, y, barWidth, barHeight);

                // 绘制数值
                ctx.fillStyle = '#333';
                ctx.font = '12px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(data[i], x + barWidth / 2, y - 5);

                // 绘制标签
                ctx.fillText(labels[i], x + barWidth / 2, chartHeight + 15);
            }
        } else {
            ctx.fillStyle = '#666';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText('无测试数据', width / 2, height / 2);
        }
    }

    function drawStatusChart() {
        var canvas = document.getElementById('statusChart');
        if (!canvas) return;

        var ctx = canvas.getContext('2d');
        var width = canvas.width;
        var height = canvas.height;

        var successRate = 50.0;

        // 清空画布
        ctx.clearRect(0, 0, width, height);

        // 绘制背景圆
        ctx.beginPath();
        ctx.arc(width / 2, height / 2, 50, 0, 2 * Math.PI);
        ctx.strokeStyle = '#e9ecef';
        ctx.lineWidth = 15;
        ctx.stroke();

        if (successRate > 0) {
            // 绘制成功率圆弧
            var endAngle = 2 * Math.PI * successRate / 100;
            ctx.beginPath();
            ctx.arc(width / 2, height / 2, 50, -Math.PI / 2, -Math.PI / 2 + endAngle);
            ctx.strokeStyle = successRate >= 80 ? '#28a745' : (successRate >= 60 ? '#ffc107' : '#dc3545');
            ctx.lineWidth = 15;
            ctx.stroke();
        }

        // 绘制中心文字
        ctx.fillStyle = '#333';
        ctx.font = 'bold 16px Arial';
        ctx.textAlign = 'center';
        ctx.textBaseline = 'middle';
        ctx.fillText(successRate.toFixed(1) + '%', width / 2, height / 2);

        ctx.font = '12px Arial';
        ctx.fillText('成功率', width / 2, height / 2 + 20);
    }

    // 页面加载时绘制图表
    window.onload = function() {
        drawPieChart();
        drawBarChart();
        drawStatusChart();
        updateButtonState(0); // 默认显示总结视图
    };
    </script>
    </body>
    </html>